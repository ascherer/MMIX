From 6a57de778f6f4cc751d13b57afab1962854e7452 Mon Sep 17 00:00:00 2001
From: Andreas Scherer <andreas_github@freenet.de>
Date: Mon, 8 Aug 2016 19:03:00 +0200
Subject: [PATCH 5/6] Fix another bug.

page 239, line 9 of section 205.
---
 mmix-pipe.w | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/mmix-pipe.w b/mmix-pipe.w
index 978b9ee..0d0acf3 100644
--- a/mmix-pipe.w
+++ b/mmix-pipe.w
@@ -3636,7 +3636,7 @@ static cacheblock* alloc_slot(c,alf)
   register cacheblock *p,*q;
   if (cache_search(c,alf)) return NULL;
   if (c->flusher.next && c->outbuf.tag.h==alf.h &&
-        !((c->outbuf.tag.l^alf.l)&c->tagmask)) return NULL;
+        !((c->outbuf.tag.l^alf.l)&-c->bb)) return NULL;
   s=cache_addr(c,alf); /* the set corresponding to |alf| */
   if (c->victim) p=choose_victim(c->victim,c->vv,c->vrepl);
   else p=choose_victim(s,c->aa,c->repl);
-- 
2.9.2

